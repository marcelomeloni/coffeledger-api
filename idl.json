{"version":"0.1.0","name":"coffee_traceability","constants":[{"name":"BATCH_SEED","type":"bytes","value":"[98, 97, 116, 99, 104]"},{"name":"STAGE_SEED","type":"bytes","value":"[115, 116, 97, 103, 101]"}],"instructions":[{"name":"createBatch","accounts":[{"name":"batch","isMut":true,"isSigner":false},{"name":"brandOwner","isMut":false,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"id","type":"string"},{"name":"producerName","type":"string"},{"name":"batchDataHash","type":"string"},{"name":"initialHolder","type":"publicKey"}]},{"name":"addStage","accounts":[{"name":"batch","isMut":true,"isSigner":false},{"name":"stage","isMut":true,"isSigner":false},{"name":"actor","isMut":false,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"stageName","type":"string"},{"name":"stageDataHash","type":"string"}]},{"name":"transferCustody","accounts":[{"name":"batch","isMut":true,"isSigner":false},{"name":"currentHolder","isMut":false,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true}],"args":[{"name":"newHolder","type":"publicKey"}]},{"name":"finalizeBatch","accounts":[{"name":"batch","isMut":true,"isSigner":false},{"name":"brandOwner","isMut":false,"isSigner":false},{"name":"payer","isMut":true,"isSigner":true}],"args":[]}],"accounts":[{"name":"Batch","type":{"kind":"struct","fields":[{"name":"creator","type":"publicKey"},{"name":"id","type":"string"},{"name":"producerName","type":"string"},{"name":"createdAt","type":"i64"},{"name":"nextStageIndex","type":"u16"},{"name":"batchDataHash","type":"string"},{"name":"status","type":{"defined":"BatchStatus"}},{"name":"currentHolder","type":"publicKey"}]}},{"name":"Stage","type":{"kind":"struct","fields":[{"name":"batch","type":"publicKey"},{"name":"stageName","type":"string"},{"name":"timestamp","type":"i64"},{"name":"actor","type":"publicKey"},{"name":"stageDataHash","type":"string"}]}}],"types":[{"name":"BatchStatus","type":{"kind":"enum","variants":[{"name":"InProgress"},{"name":"Completed"},{"name":"Cancelled"}]}}],"events":[{"name":"BatchCreated","fields":[{"name":"batchId","type":"string","index":false},{"name":"creator","type":"publicKey","index":false},{"name":"producerName","type":"string","index":false},{"name":"timestamp","type":"i64","index":false}]},{"name":"StageAdded","fields":[{"name":"batch","type":"publicKey","index":false},{"name":"stageIndex","type":"u16","index":false},{"name":"stageName","type":"string","index":false},{"name":"actor","type":"publicKey","index":false},{"name":"stageDataHash","type":"string","index":false}]},{"name":"CustodyTransferred","fields":[{"name":"batch","type":"publicKey","index":false},{"name":"from","type":"publicKey","index":false},{"name":"to","type":"publicKey","index":false}]},{"name":"BatchFinalized","fields":[{"name":"batch","type":"publicKey","index":false},{"name":"timestamp","type":"i64","index":false}]}],"errors":[{"code":6000,"name":"UnauthorizedActor","msg":"Este ator não tem permissão para realizar esta ação."},{"code":6001,"name":"BatchIsFinalized","msg":"Este lote já foi finalizado e não pode ser alterado."}]}